{"name":"AutoTest Automatic Test Case processing on Arduino","tagline":"Arduino Class for automatic testing on Arduino","body":"### AutoTest\r\n\r\n# Arduino Class for automatic testing on Arduino\r\n\r\nClass methods file for capturing all pinMode(), digitalRead() and digitalWrite() operations from the program where this is included.\r\nTestcases can be input to the digitalRead() calls and both read and write changes are sent to Serial in CSV format\r\n\r\nThe approach taken is to map the actual pin number to an array index. This uses less memory (RAM). Otherwise we would need to allocate memory for each pin (atmega2560 would mean > 50 pins) which would be quite a lot of scarce RAM.\r\nPinMode() is used to actually set the mode for the pin. Default is INPUT\r\ndigtalRead()s and digitalWrite()s map the pin to the array index an the values are either set or read\r\nfrom pinMap.\r\n\r\nThis approach also allows inputs and outputs to be mixed in the Excel sheet. So no need to define the inputs first and then the outputs. The testcases are generated in the same order as the pin order.\r\n\r\nWhen a digitalRead Takes place, a check is made if the waiting test case is allowed to be executed. If so the test case data is copied to pinMap and an actionText field. At the same time a new test case\r\nis read into memory. We need to do it this way as the delay time before a test case becomes active is also stored in the test case. The limit of testcases is 10000 although that number will probably never be reached due to Flash Memory size limitations.\r\n\r\nAs a program will probably do a lot of reading (polling) of pins there is a method called\r\n`doNotDisplayReadsIf(uint8_t val);`\r\n\r\nthis method allows to block the printing of data to serial out when the digitalread reads the value val. This will make the output more processable.\r\n\r\nTo enable users to add more data on the Serial out, the begin() method has 2 options:\r\n* begin() sets up the class without the ability to extend with user data\r\n* begin(user funcion) does the same as above but enables the user to output additional data (like counters) to the serial out\r\n\r\n# Setting up\r\nIn the folder of the sketch you need to copy the files from the folder .**Put these files in your sketch Folder**\r\nUsing Excel open the **generate TestSets.xls** and edit the **test set** sheet. I personally use the next tab **test results** to put my test results in.\r\n\r\nNext click the generate testcases button and you can compile link and upload.\r\n\r\nThe generate button generates 3 files:\r\n* **FieldLengths.h** contains field count and size defines\r\n* **PinHeaders.h** contains all the pin name definitions\r\n* **TestCases.h** contains all the testcases.\r\n\r\nThe files copied from **Put these files in your sketch Folder** folder are:\r\n* **AutomaticTesting.h**      DO NOT MODIFY THIS FILE\r\n* **generateTestSets.xls**\r\n\r\n\r\nIn the sketch itself the following code is required:\r\n\r\n\r\n`\\#define AUTOTEST`\r\n#ifdef AUTOTEST\r\n#include \"AutomaticTesting.h\"`\r\nvoid extendSerialOut(){\r\n   //\r\n   // add micros() output to Serial out\r\n   // if more fields required separate them with a semicolon\r\n   //\r\n   Serial.print(micros);\r\n   Serial.print(\";\");   \r\n   Serial.print(myField)l   \r\n}`\r\n\r\n#endif\r\n`\r\n\r\nYou can skip AUTOTEST but that allows me to switch of automatic testing with one statement\r\n\r\nIn the setup() you need to add the following statements:\r\n\r\n`#ifdef AUTOTEST\r\n\t  Serial.begin(115200);  \r\n \t  autotest.begin(extendSerialOut);\r\n#endif\r\n`\r\n\r\n**autotest.begin(extendSerialOut)** adds the ability to extend output. Serial.begin speaks for itself\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}